<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>Minha Cidade VR</title>
		<script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
		<script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.5.4/dist/aframe-extras.min.js"></script>
	</head>
	<body>
		<a-scene>
			<!-- Assets (carregar os modelos 3D) -->
			<a-assets>
				<a-asset-item id="cidadeGLB" src="models/IC_cidade.glb"></a-asset-item>
				<a-asset-item id="mapPointer" src="models/map_pointer_3d_icon.glb"></a-asset-item>
				<a-asset-item id="textBombeiro" src="models/text_bombeiro.glb"></a-asset-item>
				<a-asset-item id="textBoyner" src="models/text_boyner.glb"></a-asset-item>
				<a-asset-item id="textEscola" src="models/text_Escola.glb"></a-asset-item>
				<a-asset-item id="textFabrica" src="models/text_fabrica.glb"></a-asset-item>
				<a-asset-item id="textHospital" src="models/text_hospital.glb"></a-asset-item>
				<a-asset-item id="textHotel" src="models/text_Hotel.glb"></a-asset-item>
				<a-asset-item id="textMercado" src="models/text_mercado.glb"></a-asset-item>
				<a-asset-item id="textOrkqnCoffee" src="models/text_orkqn-coffee.glb"></a-asset-item>
				<a-asset-item id="textPostoGasolina" src="models/text_posto_gasolina.glb"></a-asset-item>
				<a-asset-item id="textPrefeitura" src="models/text_prefeitura.glb"></a-asset-item>
				<a-asset-item id="textSqCoffee" src="models/text_sq-coffee.glb"></a-asset-item>
				<a-asset-item id="textStarbucks" src="models/text_Starbucks.glb"></a-asset-item>
			</a-assets>

			<!-- Modelo da Cidade -->
			<a-entity gltf-model="#cidadeGLB" position="0 0 0" scale="1 1 1"></a-entity>

			<a-entity gltf-model="#mapPointer" 
						position="0 10 0" 
						scale="0.3 0.3 0.3" 
						rotation="0 0 0"
                		animation="property: rotation; to: 0 360 0; loop: true; dur: 5000; easing: linear"></a-entity>
			
			<a-entity gltf-model="#mapPointer" 
						position="10 10 0" 
						scale="0.3 0.3 0.3" 
						rotation="0 0 0"
                		animation="property: rotation; to: 0 360 0; loop: true; dur: 5000; easing: linear"></a-entity>

			<!-- Luz ambiente -->
			<a-entity light="type: ambient; color: #ffffff; intensity: 1.5"></a-entity>

			<!-- Luz direcional (como o sol) -->
			<a-entity
				light="type: directional; color: #ffffff; intensity: 1"
				position="5 10 7"
			></a-entity>

			<!-- Câmera com controles de navegação -->
			<a-entity
				id="player"
				position="0 2.8 5"
				movement-controls="controls: gamepad,keyboard; speed: 0.1"
			>
				<a-camera
					wasd-controls="acceleration: 10"
					look-controls="pointerLockEnabled: true"
				></a-camera>
			</a-entity>

			<!-- <a-entity
				id="rig"
				movement-controls="controls: gamepad,keyboard,nipple"
				nipple-controls="mode: static">
				<a-entity camera position="0 5 5" look-controls="pointerLockEnabled: true">
				</a-entity>
			</a-entity> -->

			<!-- HUD de coordenadas -->
			<a-text id="positionText"
					position="0 10 0"
					value="Posição:"
					color="black"
					width="10"
					rotation="90 0 0">
			</a-text>
		</a-scene>

		<script>
		// Atualizar a posição da câmera em tempo real
		AFRAME.registerComponent('position-tracker', {
			tick: function () {
			var camera = document.querySelector('#player');
			var position = camera.object3D.position;
			var text = `Posição: x=${position.x.toFixed(2)} y=${position.y.toFixed(2)} z=${position.z.toFixed(2)}`;
			document.querySelector('#positionText').setAttribute('value', text);
			}
		});

		// Adiciona o componente ao player
		document.querySelector('#player').setAttribute('position-tracker', '');
		</script>
	</body>
</html>
