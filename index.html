<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>Minha Cidade VR</title>
		<script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
		<script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.5.4/dist/aframe-extras.min.js"></script>
		<script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
	</head>
	<body>
		<a-scene>
			<!-- Assets (carregar os modelos 3D) -->
			<a-assets>
				<a-asset-item id="cidadeGLB" src="models/IC_cidade.glb"></a-asset-item>
				<a-asset-item
					id="mapPointer"
					src="models/map_pointer_3d_icon.glb"
				></a-asset-item>
				<a-asset-item id="textBombeiro" src="models/txt_bombeiro.glb"></a-asset-item>
				<a-asset-item id="textBoyner" src="models/text_boyner.glb"></a-asset-item>
				<a-asset-item id="textEscola" src="models/txt_escola.glb"></a-asset-item>
				<a-asset-item id="textFabrica" src="models/text_fabrica.glb"></a-asset-item>
				<a-asset-item id="textHospital" src="models/txt_hospital.glb"></a-asset-item>
				<a-asset-item id="textHotel" src="models/txt_hotel.glb"></a-asset-item>
				<a-asset-item id="textMercado" src="models/text_mercado.glb"></a-asset-item>
				<a-asset-item
					id="textOrkqnCoffee"
					src="models/text_orkqn-coffee.glb"
				></a-asset-item>
				<a-asset-item
					id="textPostoGasolina"
					src="models/txt_posto.glb"
				></a-asset-item>
				<a-asset-item
					id="textPrefeitura"
					src="models/text_prefeitura.glb"
				></a-asset-item>
				<a-asset-item id="textSqCoffee" src="models/text_sq-coffee.glb"></a-asset-item>
				<a-asset-item id="textStarbucks" src="models/txt_starbucks.glb"></a-asset-item>
			</a-assets>

			<!-- Modelo da Cidade -->
			<a-entity gltf-model="#cidadeGLB" position="0 0 0" scale="1 1 1"></a-entity>

			<!-- Posicionamento dos Map Pointers -->
			<a-entity
				gltf-model="#mapPointer"
				position="16 8 5"
				scale="0.3 0.3 0.3"
				rotation="0 0 0"
				animation="property: rotation; to: 0 360 0; loop: true; dur: 5000; easing: linear"
			></a-entity>

			<a-entity
				gltf-model="#mapPointer"
				position="25.15 8 -14.1"
				scale="0.3 0.3 0.3"
				rotation="0 0 0"
				animation="property: rotation; to: 0 360 0; loop: true; dur: 5000; easing: linear"
			></a-entity>

			<a-entity
				gltf-model="#mapPointer"
				position="21.09 8 -7.13"
				scale="0.3 0.3 0.3"
				rotation="0 0 0"
				animation="property: rotation; to: 0 360 0; loop: true; dur: 5000; easing: linear"
			></a-entity>

			<a-entity
				gltf-model="#mapPointer"
				position="11.77 8 -12.88"
				scale="0.3 0.3 0.3"
				rotation="0 0 0"
				animation="property: rotation; to: 0 360 0; loop: true; dur: 5000; easing: linear"
			></a-entity>

			<a-entity
				gltf-model="#mapPointer"
				position="26.22 8 -6.47"
				scale="0.3 0.3 0.3"
				rotation="0 0 0"
				animation="property: rotation; to: 0 360 0; loop: true; dur: 5000; easing: linear"
			></a-entity>

			<a-entity
				gltf-model="#mapPointer"
				position="5.29 8 -1.94"
				scale="0.3 0.3 0.3"
				rotation="0 0 0"
				animation="property: rotation; to: 0 360 0; loop: true; dur: 5000; easing: linear"
			></a-entity>

			<a-entity
				gltf-model="#mapPointer"
				position="28.06 6 -11.75"
				scale="0.3 0.3 0.3"
				rotation="0 0 0"
				animation="property: rotation; to: 0 360 0; loop: true; dur: 5000; easing: linear"
			></a-entity>

			<a-entity
				gltf-model="#mapPointer"
				position="22.05 6 -0.74"
				scale="0.3 0.3 0.3"
				rotation="0 0 0"
				animation="property: rotation; to: 0 360 0; loop: true; dur: 5000; easing: linear"
			></a-entity>
			<a-entity
				gltf-model="#mapPointer"
				position="15.54 6 -5.66"
				scale="0.3 0.3 0.3"
				rotation="0 0 0"
				animation="property: rotation; to: 0 360 0; loop: true; dur: 5000; easing: linear"
			></a-entity>
			<a-entity
				gltf-model="#mapPointer"
				position="37.38 6 -5.74"
				scale="0.3 0.3 0.3"
				rotation="0 0 0"
				animation="property: rotation; to: 0 360 0; loop: true; dur: 5000; easing: linear"
			></a-entity>
			<a-entity
				gltf-model="#mapPointer"
				position="20.99 6 20.63"
				scale="0.3 0.3 0.3"
				rotation="0 0 0"
				animation="property: rotation; to: 0 360 0; loop: true; dur: 5000; easing: linear"
			></a-entity>
			<a-entity
				gltf-model="#mapPointer"
				position="22.43 6 -14.15"
				scale="0.3 0.3 0.3"
				rotation="0 0 0"
				animation="property: rotation; to: 0 360 0; loop: true; dur: 5000; easing: linear"
			></a-entity>
			<a-entity
				gltf-model="#mapPointer"
				position="8.13 6 -2.30"
				scale="0.3 0.3 0.3"
				rotation="0 0 0"
				animation="property: rotation; to: 0 360 0; loop: true; dur: 5000; easing: linear"
			></a-entity>
			<a-entity
				gltf-model="#mapPointer"
				position="29.83 6 -2.30"
				scale="0.3 0.3 0.3"
				rotation="0 0 0"
				animation="property: rotation; to: 0 360 0; loop: true; dur: 5000; easing: linear"
			></a-entity>
			<a-entity
				gltf-model="#mapPointer"
				position="33.08 6 -11.15"
				scale="0.3 0.3 0.3"
				rotation="0 0 0"
				animation="property: rotation; to: 0 360 0; loop: true; dur: 5000; easing: linear"
			></a-entity>
			<a-entity
				gltf-model="#mapPointer"
				position="21.26 6 5.63"
				scale="0.3 0.3 0.3"
				rotation="0 0 0"
				animation="property: rotation; to: 0 360 0; loop: true; dur: 5000; easing: linear"
			></a-entity>
			<a-entity
				gltf-model="#mapPointer"
				position="25.32 6 0.28"
				scale="0.3 0.3 0.3"
				rotation="0 0 0"
				animation="property: rotation; to: 0 360 0; loop: true; dur: 5000; easing: linear"
			></a-entity>
			<a-entity
				gltf-model="#mapPointer"
				position="10.61 6 -1.98"
				scale="0.3 0.3 0.3"
				rotation="0 0 0"
				animation="property: rotation; to: 0 360 0; loop: true; dur: 5000; easing: linear"
			></a-entity>



			<!-- Posicionamento das palavras -->
			<a-entity
				gltf-model="#textBombeiro"
				position="16 9 5"
				scale="0.05 0.05 0.05"
				rotation="0 -90 0"
				look-at="#camera"
			></a-entity>
			<a-entity
				gltf-model="#textBombeiro"
				position="25.15 9 -14.1"
				scale="0.05 0.05 0.05"
				rotation="0 -90 0"
				look-at="#camera"
			></a-entity>
			<a-entity
				gltf-model="#textPostoGasolina"
				position="21.09 9 -7.13"
				scale="0.05 0.05 0.05"
				rotation="0 -90 0"
				look-at="#camera"
			></a-entity>
			<a-entity
				gltf-model="#textHotel"
				position="11.77 9 -12.88"
				scale="0.05 0.05 0.05"
				rotation="0 -90 0"
				look-at="#camera"
			></a-entity>
			<a-entity
				gltf-model="#textPrefeitura"
				position="26.22 9 -6.47"
				scale="0.05 0.05 0.05"
				rotation="0 -90 0"
				look-at="#camera"
			></a-entity>
			<a-entity
				gltf-model="#textMercado"
				position="5.29 9 -1.94"
				scale="0.05 0.05 0.05"
				rotation="0 -90 0"
				look-at="#camera"
			></a-entity>
			<a-entity
				gltf-model="#textOrkqnCoffee"
				position="28.06 7 -11.75"
				scale="0.02 0.02 0.02"
				rotation="0 -90 0"
				look-at="#camera"
			></a-entity>
			<a-entity
				gltf-model="#textOrkqnCoffee"
				position="22.05 7 -0.74"
				scale="0.02 0.02 0.02"
				rotation="0 -90 0"
				look-at="#camera"
			></a-entity>
			<a-entity
				gltf-model="#textBoyner"
				position="15.54 7 -5.66"
				scale="0.02 0.02 0.02"
				rotation="0 -90 0"
				look-at="#camera"
			></a-entity>
			<a-entity
				gltf-model="#textSqCoffee"
				position="37.38 7 -5.74"
				scale="0.02 0.02 0.02"
				rotation="0 -90 0"
				look-at="#camera"
			></a-entity>
			<a-entity
				gltf-model="#textFabrica"
				position="20.99 7 20.63"
				scale="0.02 0.02 0.02"
				rotation="0 -90 0"
				look-at="#camera"
			></a-entity>
			<a-entity
				gltf-model="#textHospital"
				position="22.43 7 -14.15"
				scale="0.02 0.02 0.02"
				rotation="0 -90 0"
				look-at="#camera"
			></a-entity>
			<a-entity
				gltf-model="#textHospital"
				position="8.13 7 -2.30"
				scale="0.02 0.02 0.02"
				rotation="0 -90 0"
				look-at="#camera"
			></a-entity>
			<a-entity
				gltf-model="#textHospital"
				position="29.83 7 -2.30"
				scale="0.02 0.02 0.02"
				rotation="0 -90 0"
				look-at="#camera"
			></a-entity>
			<a-entity
				gltf-model="#textEscola"
				position="33.08 7 -11.15"
				scale="0.02 0.02 0.02"
				rotation="0 -90 0"
				look-at="#camera"
			></a-entity>
			<a-entity
				gltf-model="#textEscola"
				position="21.26 7 5.63"
				scale="0.02 0.02 0.02"
				rotation="0 -90 0"
				look-at="#camera"
			></a-entity>
			<a-entity
				gltf-model="#textStarbucks"
				position="25.32 7 0.28"
				scale="0.02 0.02 0.02"
				rotation="0 -90 0"
				look-at="#camera"
			></a-entity>
			<a-entity
				gltf-model="#textStarbucks"
				position="10.61 7 -1.98"
				scale="0.02 0.02 0.02"
				rotation="0 -90 0"
				look-at="#camera"
			></a-entity>

			<!-- Luz ambiente -->
			<a-entity light="type: ambient; color: #ffffff; intensity: 1.5"></a-entity>

			<!-- Luz direcional (como o sol) -->
			<a-entity
				light="type: directional; color: #ffffff; intensity: 1"
				position="5 10 7"
			></a-entity>

			<!-- Câmera com controles de navegação -->
			<a-entity
				id="player"
				position="0 2.8 5"
				movement-controls="controls: gamepad,keyboard; speed: 0.1"
			>
				<a-camera id="camera"
					wasd-controls="acceleration: 10"
					look-controls="pointerLockEnabled: true"
				></a-camera>
			</a-entity>

			<!-- <a-entity
				id="rig"
				movement-controls="controls: gamepad,keyboard,nipple"
				nipple-controls="mode: static">
				<a-entity camera position="0 5 5" look-controls="pointerLockEnabled: true">
				</a-entity>
			</a-entity> -->

			<!-- HUD de coordenadas -->
			<a-text
				id="positionText"
				position="0 10 0"
				value="Posição:"
				color="black"
				width="10"
				rotation="90 0 0"
			>
			</a-text>
		</a-scene>

		<script>
			AFRAME.registerComponent("position-tracker", {
				tick: function () {
					var camera = document.querySelector("#camera");
					var worldPosition = new THREE.Vector3();
					camera.object3D.getWorldPosition(worldPosition);

					var text = `Posição Mundial: x=${worldPosition.x.toFixed(
						2
					)} y=${worldPosition.y.toFixed(2)} z=${worldPosition.z.toFixed(2)}`;
					document.querySelector("#positionText").setAttribute("value", text);
				},
			});

			document.querySelector("#camera").setAttribute("position-tracker", "");
		</script>
	</body>
</html>
